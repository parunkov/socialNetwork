(this.webpackJsonpreact4=this.webpackJsonpreact4||[]).push([[0],{100:function(e,t,n){e.exports={formControl:"FormsControls_formControl__1XGgI",error:"FormsControls_error__e5Oyv"}},103:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"i",(function(){return d})),n.d(t,"g",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return E})),n.d(t,"j",(function(){return v})),n.d(t,"f",(function(){return w})),n.d(t,"h",(function(){return O}));var a=n(6),r=n.n(a),o=n(13),s=n(30),i=n(4),u=n(12),c=n(26),l="profile/ADD-POST",m={postsData:[{id:1,text:"Magni quam optio laborum ad ipsa ab tempore necessitatibus explicabo delectus.",likesCount:12},{id:2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",likesCount:11}],newPostText:"",profile:null,status:""},f=function(e){return{type:l,newText:e}},d=function(e){return{type:"profile/SET-USER-PROFILE",profile:e}},p=function(e){return{type:"profile/SET-STATUS",status:e}},g=function(e){return{type:"profile/SAVE_PHOTO_SUCSESS",photos:e}},h=function(e){return{type:"profile/SET_FOLLOWING",isFollow:e}},b=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.checkFollowing(e);case 2:a=t.sent,n(h(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.getProfile(e);case 2:a=t.sent,n(d(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.getStatus(e);case 2:a=t.sent,n(p(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.updateStatus(e);case 3:0===t.sent.resultCode&&n(p(e)),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.savePhoto(e);case 2:0===(a=t.sent).data.resultCode&&n(g(a.data.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n,a){var o,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a().auth.id,t.next=3,u.a.saveProfile(e);case 3:if(0!==(s=t.sent).data.resultCode){t.next=8;break}n(_(o)),t.next=10;break;case 8:return n(Object(c.b)("edit-profile",{_error:s.data.messages[0]})),t.abrupt("return",Promise.reject({error:s.data.messages[0]}));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(i.a)(Object(i.a)({},e),{},{postsData:[].concat(Object(s.a)(e.postsData),[{id:e.postsData.length+1,text:t.newText,likesCount:0}]),newPostText:""});case"profile/SET-USER-PROFILE":return Object(i.a)(Object(i.a)({},e),{},{profile:t.profile});case"profile/SET-STATUS":return Object(i.a)(Object(i.a)({},e),{},{status:t.status});case"profile/DELETE-POST":return Object(i.a)(Object(i.a)({},e),{},{postsData:e.postsData.filter((function(e){return e.id!==t.postId}))});case"profile/SAVE_PHOTO_SUCSESS":return Object(i.a)(Object(i.a)({},e),{},{profile:Object(i.a)(Object(i.a)({},e.profile),{},{photos:t.photos})});case"profile/SET_FOLLOWING":return Object(i.a)(Object(i.a)({},e),{},{isFollow:t.isFollow});default:return e}}},104:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return b}));for(var a=n(6),r=n.n(a),o=n(13),s=n(30),i=n(4),u=n(12),c=["Michael","David","Emily","Samuel","Rachel"],l=[],m=0;m<c.length;m++)l[m]={},l[m].id=m+1,l[m].name=c[m];for(var f=["Lorem ipsum dolor sit amet, consectetur adipisicing elit.","Rem molestiae consectetur, quibusdam maxime veniam sit eius harum recusandae, natus possimus aperiam non accusantium quod, deserunt asperiores similique repellat nisi vitae voluptatibus.","Ipsam odio, modi sed! Rerum expedita, quos molestiae cum modi placeat, rem explicabo assumenda repellat itaque quis, dolor numquam."],d=[],p=0;p<f.length;p++)d[p]={},d[p].id=p+1,d[p].message=f[p];var g={dialogsData:l,messagesData:d,messgesPhoto:null},h=function(e){return{type:"messages/ADD-MESSAGE",newMessageText:e}},b=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.getProfile(e);case 2:a=t.sent,n({type:"messages/ADD_MESSAGES_PHOTO",payload:{messagesPhoto:a.photos.small}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"messages/ADD-MESSAGE":return Object(i.a)(Object(i.a)({},e),{},{messagesData:[].concat(Object(s.a)(e.messagesData),[{id:e.messagesData.length+1,message:t.newMessageText}])});case"messages/ADD_MESSAGES_PHOTO":return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}}},11:function(e,t,n){e.exports={nav:"Navbar_nav__1PAEd",item:"Navbar_item__12gKn",item_profile:"Navbar_item_profile__1_cTS",item_messages:"Navbar_item_messages__IfDJ_",item_news:"Navbar_item_news__1NGHk",item_music:"Navbar_item_music__1huvh",item_settings:"Navbar_item_settings__4JTHW",item_users:"Navbar_item_users__a7zVM",activeLink:"Navbar_activeLink__30wmP",login:"Navbar_login__3I7xr"}},12:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var a=n(138),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"835d872a-f736-4d6d-9d7e-efec24ff176d"}}),o={getUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return r.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return r.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return r.delete("follow/".concat(e)).then((function(e){return e.data}))},checkFollowing:function(e){return r.get("follow/".concat(e)).then((function(e){return e.data}))},checkLogin:function(){return r.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:a}).then((function(e){return e.data}))},logout:function(){return r.delete("/auth/login").then((function(e){return e.data}))},getProfile:function(e){return r.get("profile/".concat(e)).then((function(t){return console.warn("Obsolete method. Please use profileAPI object."),s.getProfile(e)}))}},s={getProfile:function(e){return r.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return r.get("profile/status/".concat(e)).then((function(e){return e}))},updateStatus:function(e){return r.put("profile/status",{status:e}).then((function(e){return e.data}))},savePhoto:function(e){var t=new FormData;return t.append("image",e),r.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e}))},saveProfile:function(e){return r.put("profile",e)}},i={getCaptchaUrl:function(){return r.get("security/get-captcha-url")}}},139:function(e,t,n){e.exports={music:"Music_music__38HAq"}},142:function(e,t,n){e.exports={settings:"Settings_settings__1iaqK"}},143:function(e,t,n){e.exports=n.p+"static/media/Spin-1s-200px.c02e8f9b.svg"},144:function(e,t,n){e.exports={preloader:"Preloader_preloader__2aSUa"}},172:function(e,t,n){e.exports=n(298)},177:function(e,t,n){},18:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return f}));var a=n(53),r=n(0),o=n.n(r),s=n(100),i=n.n(s),u=n(96),c=function(e){e.input;var t=e.meta,n=t.touched,r=t.error,s=Object(a.a)(e,["input","meta"]),u=n&&r;return o.a.createElement("div",{className:i.a.formControl+" "+(u?i.a.error:" ")},s.children,u&&o.a.createElement("span",null,r))},l=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,["input","meta"]));return o.a.createElement(c,e,o.a.createElement("textarea",Object.assign({},t,n)))},m=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,["input","meta"]));return o.a.createElement(c,e,o.a.createElement("input",Object.assign({},t,n)))},f=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return o.a.createElement("div",null,o.a.createElement(u.a,Object.assign({placeholder:e,name:t,component:n,validate:a},r))," ",o.a.createElement("span",null,s))}},23:function(e,t,n){"use strict";n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return v})),n.d(t,"f",(function(){return w}));var a=n(6),r=n.n(a),o=n(13),s=n(30),i=n(4),u=n(12),c=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(i.a)(Object(i.a)({},e),a):e}))},l="users/FOLLOW",m={users:[],frends:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},f=function(e){return{type:l,userId:e}},d=function(e){return{type:"users/UNFOLLOW",userId:e}},p=function(e){return{type:"users/SET-CURRENT-PAGE",currentPage:e}},g=function(e){return{type:"users/TOGGLE-IS-FETCHING",isFetching:e}},h=function(e,t){return{type:"users/TOGGLE_IS_FOLLOWING_PGOGRESS",followingInProgress:e,userId:t}},b=function(e){return{type:"users/GET_FREDNDS",payload:{frends:e}}},_=function(e,t){return function(){var n=Object(o.a)(r.a.mark((function n(a){var o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(g(!0)),n.next=3,u.c.getUser(e,t);case 3:o=n.sent,a(g(!1)),a({type:"users/SET-USERS",users:o.items}),a({type:"users/SET-TOTAL-USERS-COUNT",count:o.totalCount});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},E=function(){var e=Object(o.a)(r.a.mark((function e(t,n,a,o){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(h(!0,t)),e.next=3,a(t);case 3:0===e.sent.resultCode&&n(o(t)),n(h(!1,t));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),v=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(e,n,u.c.follow.bind(u.c),d);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(e,n,u.c.unfollow.bind(u.c),f);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(i.a)(Object(i.a)({},e),{},{users:c(e.users,t.userId,"id",{followed:!1}),frends:e.frends.filter((function(e){return e.id!==t.userId}))});case"users/UNFOLLOW":return Object(i.a)(Object(i.a)({},e),{},{users:c(e.users,t.userId,"id",{followed:!0}),frends:[].concat(Object(s.a)(e.frends),[{id:t.userId,name:e.users.filter((function(e){return e.id===t.userId}))[0].name,photo:e.users.filter((function(e){return e.id===t.userId}))[0].photos.small}])});case"users/SET-USERS":return Object(i.a)(Object(i.a)({},e),{},{users:t.users});case"users/SET-CURRENT-PAGE":return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case"users/SET-TOTAL-USERS-COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.count});case"users/TOGGLE-IS-FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case"users/TOGGLE_IS_FOLLOWING_PGOGRESS":return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.followingInProgress?[].concat(Object(s.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});case"users/GET_FREDNDS":return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}}},29:function(e,t,n){e.exports={userPhoto:"Paginator_userPhoto__2v8Ln",pagination:"Paginator_pagination__36wSn",selectedPage:"Paginator_selectedPage__2BseM",arrow:"Paginator_arrow__3K5Og",arrow_direction_right:"Paginator_arrow_direction_right__2bhLO",input:"Paginator_input__1o9qU"}},297:function(e,t,n){},298:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(75),s=n.n(o),i=n(43),u=n(44),c=n(46),l=n(45),m=(n(177),n(31)),f=n.n(m),d=n(14),p=n(65),g=n.n(p),h=n(15),b=n(48),_=n.n(b),E=function(e){return r.a.createElement("div",{className:g.a.loginBlock},e.isAuth?r.a.createElement("div",null,r.a.createElement("img",{alt:"user",className:g.a.photo,src:e.userPhoto?e.userPhoto:_.a}),r.a.createElement("span",{className:g.a.userName},e.login),r.a.createElement("button",{className:g.a.button,onClick:e.logout},"Logout")):r.a.createElement(h.b,{to:"/login"},"Login"))},v=n(6),w=n.n(v),O=n(13),S=n(4),j=n(12),N=n(26),P={initialized:!1,id:null,email:null,login:null,isAuth:!1,isFetching:!1,captchaUrl:null},y=function(e,t,n,a){return{type:"auth/SET_USER_DATA",payload:{id:e,email:t,login:n,isAuth:a,captchaUrl:null}}},k=function(e){return{type:"auth/GET_CAPTCHA_URL_SUCSESS",payload:{captchaUrl:e}}},x=function(){return function(){var e=Object(O.a)(w.a.mark((function e(t){var n,a,r,o,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.c.checkLogin();case 2:0===(n=e.sent).resultCode&&(a=n.data,r=a.id,o=a.login,s=a.email,t(y(r,s,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(){return function(){var e=Object(O.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.c.logout();case 2:0===e.sent.resultCode&&t(y(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=function(){return function(){var e=Object(O.a)(w.a.mark((function e(t){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.b.getCaptchaUrl();case 2:n=e.sent,a=n.data.url,t(k(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_INITIALIZED":return Object(S.a)(Object(S.a)({},e),{},{initialized:!0});case"auth/SET_USER_DATA":case"auth/GET_CAPTCHA_URL_SUCSESS":return Object(S.a)(Object(S.a)({},e),t.payload);default:return e}},T=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.checkLogin()}},{key:"render",value:function(){return r.a.createElement(E,this.props)}}]),n}(r.a.Component),U=Object(d.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,userPhoto:e.messages.messagesPhoto}}),{setAuthUserData:y,checkLogin:x,logout:C})(T),A=n(20),D=n.n(A),F=function(e){return r.a.createElement("header",{className:f.a.header},r.a.createElement("h1",{className:f.a.logo},"Social",r.a.createElement("span",null,"Network")),r.a.createElement("div",{className:f.a.login},r.a.createElement(U,null)),e.menuShown&&r.a.createElement("button",{type:"button",className:f.a.burger,onClick:e.toggleMenu},"Close menu",r.a.createElement("div",{className:D()(f.a.burgerLine,f.a.burgerLine_cross)})),!e.menuShown&&r.a.createElement("button",{type:"button",className:f.a.cross,onClick:e.toggleMenu},"Open menu",r.a.createElement("div",{className:f.a.burgerLine})))},G=n(11),M=n.n(G),z=n(41),W=n.n(z),R=function(e){var t=e.userId,n=e.userName,a=e.photo;return r.a.createElement("div",{className:W.a.sidebar__item},r.a.createElement(h.b,{to:"/profile/"+t,className:W.a.sidebar__name},n),r.a.createElement(h.b,{to:"/profile/"+t},r.a.createElement("img",{src:null!==a?a:_.a,alt:"",className:W.a.sidebar__avatar})))},H=function(e){var t=e.frends,n=e.getFrends;return r.a.createElement("div",{className:W.a.sidebar},0!==t.length&&r.a.createElement("div",{className:W.a.sidebar__header},"Frends"),t.map((function(e){return r.a.createElement(R,{key:e.id,userId:e.id,userName:e.name,photo:e.photo})})),0!==t.length&&r.a.createElement("button",{className:W.a.button,onClick:function(){localStorage.setItem("frends",JSON.stringify([])),n([])}},"Clear all"))},q=n(23),B=(Object(d.b)((function(e){return{frends:e.usersPage.frends}}),{getFrends:q.c})(H),function(e){return r.a.createElement("div",null,e.menuShown&&r.a.createElement("div",null,r.a.createElement("nav",{className:M.a.nav},r.a.createElement(h.b,{to:"/profile",activeClassName:M.a.activeLink},r.a.createElement("div",{className:D()(M.a.item,M.a.item_profile)},"Profile")),r.a.createElement(h.b,{to:"/dialogs",activeClassName:M.a.activeLink},r.a.createElement("div",{className:D()(M.a.item,M.a.item_messages)},"Messages")),r.a.createElement(h.b,{to:"/news",activeClassName:M.a.activeLink},r.a.createElement("div",{className:D()(M.a.item,M.a.item_news)},"News")),r.a.createElement(h.b,{to:"/music",activeClassName:M.a.activeLink},r.a.createElement("div",{className:D()(M.a.item,M.a.item_music)},"Music")),r.a.createElement(h.b,{to:"/settings",activeClassName:M.a.activeLink},r.a.createElement("div",{className:D()(M.a.item,M.a.item_settings)},"Settings")),r.a.createElement(h.b,{to:"/users",activeClassName:M.a.activeLink},r.a.createElement("div",{className:D()(M.a.item,M.a.item_users)},"Users"))),r.a.createElement("div",{className:M.a.login},r.a.createElement(U,null))))}),J=n(139),V=n.n(J),K=function(){return r.a.createElement("div",{className:V.a.music},r.a.createElement("h1",null,"Music"))},X=n(18),Y=n(39),Z=n(135),$=n(141),Q=n.n($),ee=n(54),te=n.n(ee),ne=function(e){var t=e.date,n=e.title,a=e.text,o=Q()(t).format("LLL");return r.a.createElement("div",{className:te.a.newsItem},r.a.createElement("div",null,o),r.a.createElement("h2",null,n),r.a.createElement("div",null,a))},ae=Object(Z.a)({form:"news"})((function(e){var t=e.handleSubmit;e.error;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement("b",null,"News title:")),r.a.createElement("div",null,Object(X.c)("News title","newsTitle",X.a,[Y.b])),r.a.createElement("div",null,r.a.createElement("b",null,"News text:")),r.a.createElement("div",null,Object(X.c)("News text","newsText",X.b,[Y.b])),r.a.createElement("button",{type:"submit"},"Add news"))})),re=function(e){var t=e.news,n=e.addNews,a=e.reset,o=t.reverse().map((function(e){return r.a.createElement(ne,{key:e.id,date:e.date,title:e.title,text:e.text})}));return r.a.createElement("div",{className:te.a.news},r.a.createElement("div",{className:te.a.form},r.a.createElement("h2",null,"Add news"),r.a.createElement(ae,{onSubmit:function(e){n(new Date,e.newsTitle,e.newsText),a("news")}})),r.a.createElement("div",{className:te.a.newsList},r.a.createElement("h1",null,"News list"),r.a.createElement("div",null,o)))},oe=n(30),se={news:[{id:1,date:new Date(2020,7,3,13,28),title:"Lorem ipsum dolor sit amet",text:"Illo iusto placeat aliquid tempore harum similique, quo deleniti, velit eum labore est a consectetur aut cum. Hic quo nobis aspernatur, iste ut voluptate voluptatum repudiandae! Aut architecto, eligendi, repellat asperiores voluptatibus odio deserunt dignissimos, dicta laudantium voluptatem minima praesentium sed tempore."}]},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"news/ADD_NEWS":return Object(S.a)(Object(S.a)({},e),{},{news:[].concat(Object(oe.a)(e.news),[{id:e.news.length+1,date:t.date,title:t.title,text:t.text}])});default:return e}},ue=Object(d.b)((function(e){return{news:e.news.news}}),{addNews:function(e,t,n){return{type:"news/ADD_NEWS",date:e,title:t,text:n}},reset:N.a})(re),ce=n(142),le=n.n(ce),me=function(){return r.a.createElement("div",{className:le.a.settings},r.a.createElement("h1",null,"Settings"))},fe=n(53),de=n(60),pe=n(29),ge=n.n(pe),he=function(e){for(var t=e.totalItemsCount,n=e.pageSize,o=e.currentPage,s=e.onPageChanged,i=Object(a.useState)(10),u=Object(de.a)(i,2),c=u[0],l=u[1],m=Math.ceil(t/n),f=[],d=1;d<=m;d+=1)f.push(d);var p=Math.ceil(m/c),g=Object(a.useState)(1),h=Object(de.a)(g,2),b=h[0],_=h[1],E=(b-1)*c+1,v=b*c,w=function(e){s(1===e?1:e===c?m:(e-1)*c+c/2)},O=Object(a.useState)(!1),S=Object(de.a)(O,2),j=S[0],N=S[1],P=Object(a.useState)(o),y=Object(de.a)(P,2),k=y[0],x=y[1];Object(a.useEffect)((function(){x(o)}),[o]);var C=function(e){x(e.currentTarget.value)},I=function(e){var t=e.p;return j?r.a.createElement("input",{className:ge.a.input,onChange:C,onBlur:function(e){var t=Math.floor(+e.currentTarget.value);t<1&&(t=1),t>m&&(t=m),N(!1),o=t,s(t),_(Math.ceil(t/c))},autoFocus:!0,type:"number",step:"1",min:"1",max:"{pagesCount}",value:k}):r.a.createElement("span",{className:D()(ge.a.selectedPage,ge.a.pageNumber),onClick:function(e){N(!0)},key:t},t)},L=function(){window.innerWidth<700?l(4):l(10),_(Math.ceil(o/c))};return Object(a.useEffect)((function(){return L(),window.addEventListener("resize",L),function(){window.removeEventListener("resize",L)}})),r.a.createElement("div",{className:ge.a.pagination},b>1&&r.a.createElement("span",null,r.a.createElement("button",{onClick:function(e){s(1),_(1)}},"1"),r.a.createElement("button",{className:D()(ge.a.arrow,ge.a.arrow_direction_left),onClick:function(){_(b-1),w(b-1)}},r.a.createElement("span",null,"Prev"))),f.filter((function(e){return e>=E-1&&e<=v})).map((function(e){return e===o?r.a.createElement(I,{p:e,key:e}):r.a.createElement("span",{className:ge.a.pageNumber,onClick:function(t){s(e)},key:e},e)})),p>b&&r.a.createElement("span",null,r.a.createElement("button",{className:D()(ge.a.arrow,ge.a.arrow_direction_right),onClick:function(){_(b+1),w(b+1)}},r.a.createElement("span",null,"Next")),r.a.createElement("button",{onClick:function(e){s(m),_(p)}},m)))},be=n(40),_e=n.n(be),Ee=function(e){var t=e.followed,n=e.userId,a=e.followingInProgress,o=e.unfollow,s=e.follow;return r.a.createElement("div",null,t?r.a.createElement("button",{disabled:a.some((function(e){return e===n})),onClick:function(){o(n)}},"Unfollow"):r.a.createElement("button",{disabled:a.some((function(e){return e===n})),button:!0,onClick:function(){s(n)}},"Follow"))},ve=function(e){var t=e.user,n=e.followingInProgress,a=e.unfollow,o=e.follow;return r.a.createElement("div",{className:_e.a.user},r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(h.b,{to:"/profile/"+t.id},r.a.createElement("img",{className:_e.a.userPhoto,src:null!=t.photos.small?t.photos.small:_.a,alt:"fff"}))),r.a.createElement(Ee,{followed:t.followed,userId:t.id,followingInProgress:n,unfollow:a,follow:o})),r.a.createElement("span",null,r.a.createElement("span",null,r.a.createElement("h3",{className:_e.a.userTitle},t.name),r.a.createElement("div",null,t.status))))},we=function(e){var t=e.totalItemsCount,n=e.pageSize,a=e.currentPage,o=e.onPageChanged,s=e.users,i=Object(fe.a)(e,["totalItemsCount","pageSize","currentPage","onPageChanged","users"]);return r.a.createElement("div",{className:_e.a.usersWrapper},r.a.createElement(he,{totalItemsCount:t,pageSize:n,currentPage:a,onPageChanged:o}),r.a.createElement("div",{className:_e.a.users},s.map((function(e){return r.a.createElement(ve,{key:e.id,user:e,followingInProgress:i.followingInProgress,unfollow:i.unfollow,follow:i.follow})}))))},Oe=n(49),Se=n(145),je=Object(Se.a)((function(e){return e.usersPage.users}),(function(e){return e})),Ne=function(e){return e.usersPage.pageSize},Pe=function(e){return e.usersPage.totalUsersCount},ye=function(e){return e.usersPage.currentPage},ke=function(e){return e.usersPage.isFetching},xe=function(e){return e.usersPage.followingInProgress},Ce=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){var n=e.props,a=n.setCurrentPage,r=n.getUsers,o=n.pageSize;a(t),r(t,o)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.getUsers(t,n),this.props.getFrends(JSON.parse(localStorage.getItem("frends")))}},{key:"componentDidUpdate",value:function(e){this.props.frends!==e.frends&&localStorage.setItem("frends",JSON.stringify(this.props.frends))}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.isFetching?r.a.createElement(Oe.a,null):null,r.a.createElement(we,{totalItemsCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,toggleFollowingInProgress:this.props.toggleFollowingInProgress,followingInProgress:this.props.followingInProgress}))}}]),n}(r.a.Component),Ie=Object(d.b)((function(e){return{users:je(e),pageSize:Ne(e),totalUsersCount:Pe(e),currentPage:ye(e),isFetching:ke(e),followingInProgress:xe(e),frends:e.usersPage.frends}}),{follow:q.b,unfollow:q.f,setCurrentPage:q.e,getUsers:q.d,getFrends:q.c})(Ce),Le=n(10),Te=n(80),Ue=n.n(Te),Ae=Object(Z.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,a=e.captchaUrl;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,Object(X.c)("Login","login",X.a,[Y.b])),r.a.createElement("div",null,Object(X.c)("Password","password",X.a,[Y.b],{type:"password"})),r.a.createElement("div",{className:Ue.a.checkbox},Object(X.c)(null,"rememberMe",X.a,[],{type:"checkbox"},"Remember me")),r.a.createElement("div",null,a&&r.a.createElement("img",{src:a,alt:"captcha"})),r.a.createElement("div",null,a&&Object(X.c)("Sumbols from image","captcha",X.a,[Y.b])),n&&r.a.createElement("div",{className:Ue.a.formSummeryError},n),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Login")))})),De=Object(d.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,n,a){return function(){var r=Object(O.a)(w.a.mark((function r(o){var s,i;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,j.c.login(e,t,n,a);case 2:0===(s=r.sent).resultCode?o(x()):(10===s.resultCode&&o(I()),i=s.messages.length>0?s.messages[0]:"Email or password is wrong",o(Object(N.b)("login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},logout:C,getCaptchaUrl:I})((function(e){return e.isAuth?(console.log(e),r.a.createElement(Le.a,{to:"/profile"})):r.a.createElement("div",{className:Ue.a.loginForm},r.a.createElement("h1",null,"Login"),r.a.createElement(Ae,{onSubmit:function(t){e.login(t.login,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl}))})),Fe={initialized:!1,globalError:null},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INITIALIZED":return Object(S.a)(Object(S.a)({},e),{},{initialized:!0});default:return e}},Me=n(9),ze=function(e){return function(t){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(Oe.a,null)},r.a.createElement(e,t))}},We=n(103),Re=n(104),He={},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return e},Be=n(146),Je=n(136),Ve=Object(Me.c)({profile:We.b,messages:Re.b,sidebar:qe,usersPage:q.a,auth:L,form:Je.a,app:Ge,news:ie}),Ke=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Me.d,Xe=Object(Me.e)(Ve,Ke(Object(Me.a)(Be.a))),Ye=r.a.lazy((function(){return n.e(4).then(n.bind(null,305))})),Ze=r.a.lazy((function(){return n.e(3).then(n.bind(null,304))})),$e=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).catchAllUnhandledErrors=function(e){},a.updateWidth=function(){a.setState({windowWidth:window.innerWidth}),window.innerWidth>700&&a.setState({menuShown:!0})},a.toggleMenu=function(){a.setState({menuShown:!a.state.menuShown})},a.state={menuShown:!1,windowWidth:window.innerWidth},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors),this.props.getFrends(JSON.parse(localStorage.getItem("frends"))),window.addEventListener("resize",this.updateWidth),this.updateWidth()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors),window.removeEventListener("resize",this.updateWidth)}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app"},r.a.createElement(F,{menuShown:this.state.menuShown,toggleMenu:this.toggleMenu}),r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(B,{menuShown:this.state.menuShown}),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(Le.d,null,r.a.createElement(Le.b,{exact:!0,path:"/",render:function(){return r.a.createElement(Le.a,{to:"/profile"})}}),r.a.createElement(Le.b,{path:"/dialogs",render:ze(Ye)}),r.a.createElement(Le.b,{path:"/profile/:userId?",render:ze(Ze)}),r.a.createElement(Le.b,{path:"/music",render:function(){return r.a.createElement(K,null)}}),r.a.createElement(Le.b,{path:"/news",render:function(){return r.a.createElement(ue,null)}}),r.a.createElement(Le.b,{path:"/settings",render:function(){return r.a.createElement(me,null)}}),r.a.createElement(Le.b,{path:"/users",render:function(){return r.a.createElement(Ie,null)}}),r.a.createElement(Le.b,{path:"/login/facebook",render:function(){return r.a.createElement("div",null,"Facebook")}}),r.a.createElement(Le.b,{path:"/login",render:function(){return r.a.createElement(De,null)}}),r.a.createElement(Le.b,{path:"*",render:function(){return r.a.createElement("div",null,"404 NOT FOUND")}}))))):r.a.createElement(Oe.a,null)}}]),n}(r.a.Component),Qe=Object(Me.d)(Le.g,Object(d.b)((function(e){return{initialized:e.app.initialized,frends:e.usersPage.frends}}),{initializeApp:function(){return function(e){e(x()).then((function(){e({type:"SET_INITIALIZED"})}))}},getFrends:q.c}))($e),et=function(e){return r.a.createElement(h.a,null,r.a.createElement(d.a,{store:Xe},r.a.createElement(Qe,null)))};n(297),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},31:function(e,t,n){e.exports={header:"Header_header__2g8Ev",logo:"Header_logo__2EB70",login:"Header_login__345pq",burger:"Header_burger__fnU0Y",cross:"Header_cross__GrIk8",burgerLine:"Header_burgerLine__2_KtK",burgerLine_cross:"Header_burgerLine_cross__2q9-z"}},39:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},40:function(e,t,n){e.exports={usersWrapper:"Users_usersWrapper__S3z0S",users:"Users_users__27yYs",userPhoto:"Users_userPhoto__1Xer_",pagination:"Users_pagination__1Fkq3",selectedPage:"Users_selectedPage__1wXdP",user:"Users_user__2yBbM",userTitle:"Users_userTitle__3uLV0"}},41:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__3mCHw",sidebar__header:"Sidebar_sidebar__header__1IY1g",sidebar__item:"Sidebar_sidebar__item__2IYEV",sidebar__name:"Sidebar_sidebar__name__1vGul",sidebar__avatar:"Sidebar_sidebar__avatar__S3lo-",button:"Sidebar_button__5pcc1"}},48:function(e,t,n){e.exports=n.p+"static/media/user.a9ca63cd.svg"},49:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(143),s=n.n(o),i=n(144),u=n.n(i);t.a=function(e){return r.a.createElement("img",{src:s.a,className:u.a.preloader,alt:""})}},54:function(e,t,n){e.exports={news:"News_news__wyoJx",newsList:"News_newsList__33cJC",newsItem:"News_newsItem__3i0ic",form:"News_form__7Z8rZ"}},65:function(e,t,n){e.exports={loginBlock:"LoginBlock_loginBlock__gVdfz",userName:"LoginBlock_userName__KndV9",button:"LoginBlock_button__Dim0G",photo:"LoginBlock_photo__yGXdh"}},80:function(e,t,n){e.exports={loginForm:"Login_loginForm__deYtE",checkbox:"Login_checkbox__zJLxd",formSummeryError:"Login_formSummeryError__A8W0i"}}},[[172,1,2]]]);
//# sourceMappingURL=main.2347ec8b.chunk.js.map